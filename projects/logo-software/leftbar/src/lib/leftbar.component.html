<!--
/**
 * @license
 * Copyright LOGO YAZILIM SANAYİ VE TİCARET A.Ş. All Rights Reserved.
 *
 * Save to the extent permitted by law, you may not use, copy, modify,
 * distribute or create derivative works of this material or any part
 * of it without the prior written consent of LOGO YAZILIM SANAYİ VE TİCARET A.Ş. Limited.
 * Any reproduction of this material must contain this notice.
 */
-->
<div *ngIf="!!leftbarService.userInfo" [ngClass]="leftbarService.isSlim ? 'slim': ''" class="le-leftbar">
  <div class="info-card">
    <div [ngClass]="showUserDetails ? 'extended' : ''" class="user-base">
      <div class="item user-summary-card">
        <button (click)="toggleUserDetails();" class="ghost"></button>
        <span
          class="avatar-background"
          style="background-image: url({{leftbarService.userInfo.avatar}});"
        >
        </span>
        <span class="avatar">
          <img src="{{leftbarService.userInfo.avatar}}">
        </span>
        <span *ngIf="leftbarService.userInfo.notifications" class="badge danger top left">
          {{leftbarService.userInfo!.notifications}}
        </span>
        <div class="details">
          <h6>{{leftbarService.userInfo.name}}</h6>
          <p class="small">{{leftbarService.userInfo.title}}</p>
        </div>
      </div>
      <div class="expandable-content">
        <button (click)="toggleUserDetails()" class="le-cross ghost large close-user-btn"></button>
        <div class="row infos">
          <div
            *ngFor="let item of leftbarService.userInfo.infos"
            class="col-md-{{item.col}} {{item.reference}}"
          >
            <div class="item">
              <button (click)="infoReqEmitter(item.actionParam)" *ngIf="item.actionParam"
                      class="ghost sum-button"></button>
              <logo-link *ngIf="item.link" [classes]="'ghost sum-button'" [url]="item.link"></logo-link>
              <span *ngIf="item.title" class="title">
                {{item.title}}
                <span *ngIf="item.badge" class="badge danger">{{item.count}}</span>
              </span>
              <span *ngIf="item.icon" class="title icon {{item.icon}}"></span>
              <p *ngIf="item.desc; else countTemp" class="small">{{item.desc}}</p>
              <ng-template #countTemp>{{item.count}}</ng-template>
            </div>
          </div>
        </div>
        <div *ngFor="let option of leftbarService.userInfo.links" class="item options">
          <logo-link
            [classes]="'ghost large'" [ngClass]="option.name ==='Çıkış yap'?'text-danger':''"
            [url]="option.link"
          >
            {{option.name}}
          </logo-link>
        </div>
      </div>
    </div>
    <div [ngClass]="{'mobile-fix':leftbarService.userInfo.applications.options.length > 1}" class="tenant-base">
      <div class="item">
        <span class="tenant-options-base">
          <button
            (click)="togglePopover('tenantOptions')"
            class="ghost small icon-right le-arrow_down">
            <span class="le-login_key"></span>
            {{leftbarService.userInfo.tenants.default}}
          </button>
          <div
            [ngClass]="activePopover === 'tenantOptions' && popoverStatus ? 'opened':''"
            class="popover"
            id="tenantOptions"
          >
            <div class="popover-search-base">
              <span class="input-w-icon">
                <span class="le-search input-icon"></span>
                <input class="icon-left" id="searchTenant">
              </span>
            </div>
            <div class="result-base" id="tenantResults">
              <button
                (click)="selectTenantEmitter(tenant.id)"
                *ngFor="let tenant of leftbarService.userInfo.tenants.options"
                class="ghost"
              >
                {{tenant.name}}
              </button>
            </div>
          </div>
        </span>
      </div>
    </div>
    <div class="search-base">
      <button (click)="toggleMenu()" class="search-btn ghost le-search"></button>
      <span class="input-w-icon">
        <span class="le-search input-icon"></span>
        <input
          #leftbarSearch
          (keyup)="doSearchEmitter(leftbarSearch.value)"
          class="icon-left"
          placeholder="Size Nasıl Yardımcı Olabilirim?"
        >
      </span>
    </div>
    <div [ngClass]="{'hidden-mobile': leftbarService.userInfo.applications.options.length < 2}" class="shortcuts-base">
      <div class="standarts">
        <div class="home item">
          <button (click)="homeEmitter()" class="ghost le-home"></button>
        </div>
        <div class="apps item">
          <div *ngIf="leftbarService.userInfo.applications.options.length > 1">
            <button
              (click)="togglePopover('appOptions')"
              class="ghost icon-right le-arrow_down"
            >
              <img class="app-logo" src="{{leftbarService.userInfo.applications.default}}"/>
              <img class="app-icon" src="{{leftbarService.userInfo.applications.defaultIcon}}"/>
            </button>
            <div
              [ngClass]="activePopover === 'appOptions' && popoverStatus ? 'opened':''"
              class="popover"
              id="appOptions"
            >
              <button
                *ngFor="let app of leftbarService.userInfo.applications.options"
                (click)="selectAppEmitter(app.id)"
                class="ghost"
              >
                <img src="{{app.logo}}"/>
              </button>
            </div>
          </div>
          <div *ngIf="leftbarService.userInfo.applications.options.length < 2" class="single-app">
            <span class="aligner"></span>
            <img class="app-logo" src="{{leftbarService.userInfo.applications.default}}"/>
            <img class="app-icon" src="{{leftbarService.userInfo.applications.defaultIcon}}"/>
          </div>
        </div>
      </div>
      <div class="custom-shortcuts">
        <ng-container *ngIf="leftbarService.userInfo.shortcuts.length > 0">
          <div *ngFor="let shortcut of leftbarService.userInfo.shortcuts" class="logo-tooltip">
            <logo-link
              [classes]="shortcut.class"
              [url]="shortcut.link"
            >
              <img src="{{shortcut.icon}}"/>
            </logo-link>
            <span class="tip on-bottom">{{shortcut.name}}</span>
          </div>
        </ng-container>
        <ng-container *ngIf="this.emptyShortcutSlots.length > 0">
          <button
            *ngFor="let addItem of emptyShortcutSlots"
            (click)="addShortcutEmitter()"
            class="primary ghost add-button le-add"
          >
          </button>
        </ng-container>
        <button (click)="shortcutSettingsEmitter()" class="ghost le-settings"></button>
      </div>
    </div>
    <button
      (click)="toggleMobileMenu()"
      [ngClass]="mobileMenu ? 'le-cross' : 'le-hamburger'"
      class="mobile-menu-btn large ghost"
    >
    </button>
  </div>
  <div [ngClass]="{'opened' : mobileMenu}" class="menu-base">
    <ng-content></ng-content>
    <span class="menu-toggle-base">
      <button
        (click)="toggleMenu()"
        [ngClass]="leftbarService.isSlim ? 'le-double_chevron_right' : 'le-double_chevron_left'"
        class="toggle-button"
      >
      </button>
    </span>
  </div>
</div>
