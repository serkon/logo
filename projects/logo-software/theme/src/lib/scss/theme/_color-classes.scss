$secondary-font-darkened: darken(color(#{secondary}-600), get("form.secondary-font-darkener"));
$not-exist-state-list: "";
@each $d-state in get("form.default-states") {
  @if index(get("form.states"), $d-state) == null {
    $not-exist-state-list: $not-exist-state-list + "&:" + $d-state + ",";
  }
}

@debug $not-exist-state-list;

/**
  Template (outline & ghost): ghost and outline common styles
 */
%ghost-outline {
  background-color: transparent;

  @each $color, $value in get("color.list") { // colors
    &.#{$color} {
      background: none;
      $selected-color: '';
      @if ($color == secondary) {
        $selected-color: $secondary-font-darkened;
      } @else if ($color == gray) {
        $selected-color: var(--#{$color}-#{get("form.dark-shade")});
      } @else if ($color == light) {
        $selected-color: var(--dark-#{get("form.dark-shade")});
      } @else if ($color == dark) {
        $selected-color: var(--white);
      } @else {
        $selected-color: var(--#{$color});
      }
      color: $selected-color;
      $bg-color: "";
      @each $state in get("form.states") { // states
        // &:not(:disabled) {
        &:#{$state} {
          @if ($color == secondary) {
            $bg-color: rgba(var(--#{$color}-#{$state}-rgb), (color(ghost-#{$state}) + 0.2));
          } @else if ($color == light) {
            $bg-color: rgba(var(--light-hover-rgb), (color(ghost-#{$state}) + 0.2));
          } @else if ($color == dark) {
            $bg-color: rgba(var(--white), (color(ghost-#{$state}) + 0.2));
          } @else {
            $bg-color: rgba(var(--#{$color}-#{$state}-rgb), var(--ghost-#{$state}));
          }
          background-color: $bg-color;
        }
        // }
      }

      @if get("bootstrap.status") {
        &:active, &:focus {
          color: $selected-color;
          background-color: $bg-color;
        }
      }
    }
  }
}

/**
  Template (fill & ghost): fill and ghost common styles
 */
%fill, %ghost {
  border: none;
}

/**
  Template (outline): outline styles
 */
%outline {
  @extend %ghost-outline;
  @each $color, $value in get("color.list") {
    &.#{$color} {
      $border: size(1px) solid if($color == light, var(--light-600), if($color== secondary, var(--secondary-600), if($color == dark, var(--white), var(--#{$color}-500))));
      border: $border;

      &:hover, &:active, &:focus {
        border: $border;
      }
    }
  }
}

/**
  Template (ghost): ghost styles
 */
%ghost {
  @extend %ghost-outline;
}

/**
 Template (fill): fill styles
 */
@each $type in get("form.types") {
  @if ($type == fill) {
    %#{$type} {
      @each $color, $color-value in get("color.list") {
        &.#{$color} {
          background-color: var(--#{$color}-500);
          color: if($color == light, var(--dark-#{get("form.dark-shade")}), if($color == secondary, $secondary-font-darkened, var(--white)));
          @each $state in get("form.states") {
            &:#{$state} {
              background-color: var(--#{$color}-#{$state});
              @if $state != hover {
                @include nb-outline(size(8px), rgba(var(--gray-600-rgb), color(ghost-hover)));
              }
            }
          }
          @if not $not-exist-state-list != "" {
            #{$not-exist-state-list} {
              @include nb-outline(size(8px), rgba(var(--gray-600-rgb), color(ghost-hover)));
            }
          }
          @if get("bootstrap.status") {
            &:active, &:focus {
              background-color: var(--#{$color}-500);
            }
          }
        }
      }
    }
  }
}

/**
  All brand colors have shades(brand-50 to 900, etc.), shadowed, and selected color version.
 */
@each $color, $value in get("color.list") {
  .#{$color} {
    &.shadow {
      box-shadow: 0 size(7px) size(10px) size(-4px) var(--#{$color});
    }

    &.selected {
      outline: size(2px) solid var(--#{$color}-focus);
    }
  }

  @each $name, $ratio in get("color.shades") {
    $tempColor: if($name >= 500, shade($value, $ratio), tint($value, $ratio));
    .#{$color}-#{$name} {
      background-color: $tempColor;
    }
  }
}

/**
  Disabled element display setting
 */
:disabled {
  opacity: get("color.disabled-opacity");
  pointer-events: none;
}

/**
  Extend classes
 */
@if get("extend-colors")==true {
  #{get("selector")} {
    @each $type in get("form.types") {
      @each $color, $color-value in get("color.list") {
        @if ($type==fill) {
          .#{$color} {
            @extend %fill;
          }
        }
      }
    }

    .outline, .ghost {
      @extend %ghost-outline;
    }

    .ghost {
      @extend %ghost;
      @extend %ghost-outline.secondary;
    }

    .outline {
      @extend %outline;
      @extend %ghost-outline.secondary;
    }
  }
}

:root {
  .fill {
    @extend %fill;
    @extend %fill.secondary;
  }

  .ghost {
    @extend %ghost;
    @extend %ghost.secondary;
  }

  .outline {
    @extend %outline;
    @extend %outline.secondary;
  }
}
