.custom-control {
  $padding: 0;
  $width: size(14px);
  padding-left: $padding;
  margin: 0;

  input.custom-control-input {
    opacity: 1;

    & + label.custom-control-label {
      margin-bottom: 0;

      &::before, &::after {
        display: none;
      }
    }
  }

  @each $size, $value in get("form.sizes") {
    &.#{$size} {
      input.custom-control-input {
        & + label.custom-control-label {
          @extend label.#{$size};
        }
      }
    }
  }

  &.custom-checkbox {
    input.custom-control-input {
      display: inline-block !important;
      width: $width !important;

      &:checked, &:indeterminate {
        & + label.custom-control-label {
          &::before {
            border-radius: size(3px);
          }

          &::after {
            background-color: var(--info);
            border-radius: get("border.radius");
          }
        }
      }
    }
  }

  &.custom-switch {
    @extend .custom-switch.medium;

    input.custom-control-input {
      & + label.custom-control-label {
        &::before {
          background-color: var(--secondary-500);
        }

        &::before, &::after {
          position: absolute;
          border: none;
          pointer-events: auto;
          display: inline-block;
        }

        &::before {
          top: 0;
        }

        &::after {
          background-color: var(--white);
          border-radius: 50%;
          box-shadow: 0 0 size(4px) 0 var(--gray-50);
        }
      }

      &:checked {
        & + label.custom-control-label {
          &::before {
            background-color: var(--info-500);
          }

          &::after {
            background-color: var(--white);
            box-shadow: 0 0 size(4px) 0 #00000040;
          }
        }
      }
    }

    @each $size, $value in get("form.sizes") {
      &.#{$size} {
        $width: size(get("form.switch."+$size+".width"));
        $circle-padding: size(get("form.switch."+$size+".circle-padding"));
        $padding-left: $width + size(5px);
        $height: size(map-get($value, height));
        $after-size: size($height - $circle-padding * 2);
        padding-left: $padding-left;

        input.custom-control-input {
          & + label.custom-control-label {
            &::before {
              width: $width;
              left: $padding-left * -1;
              height: $height;
              border-radius: $height / 2;
            }

            &::after {
              left: ($padding-left - $circle-padding) * -1;
              background-color: var(--white);
              border-radius: 50%;
              top: $circle-padding;
              height: $after-size;
              width: $after-size;
            }
          }

          &:checked {
            & + label.custom-control-label {
              &::after {
                left: ($after-size + size(17px) + $circle-padding) * -1;
              }
            }
          }
        }
      }
    }
  }
}

