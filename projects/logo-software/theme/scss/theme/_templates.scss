/**
  Template (fill): fill styles
 */
// @debug join(get("color.state"), get("color.semantic"));

@function sat($color) {
  @return var(--#{$color}-900);
  // @return saturate(color(#{$color}-900), 2%);
}

%fill {
  border: size(1px) solid transparent;
  outline: none;
  @each $color, $value in get("color.state") {
    &.#{$color} {
      background-color: var(--#{$color});
      // color: if($color == basic or $color==light or $color == secondary or $color == gray, mix-darkener($color), var(--white));
      color: if($color == basic or $color == light or $color == secondary or $color == gray, sat($color), var(--white));
      @each $state in get("state.current") {
        &:#{$state} {
          background-color: var(--#{$color}-#{$state});
          // border-color: if($color == light, var(--light), var(--#{$color}-#{$state}));
        }
      }
    }
  }

  &:active, &:focus {
    @include nb-outline(size(8px), rgba(var(--gray-600-rgb), color(ghost-hover)));
  }
}

/**
  Template (outline): outline styles
 */
%outline {
  @each $color, $value in get("color.state") {
    &.#{$color} {
      background-color: transparent;
      border: size(1px) solid var(--#{$color});
      // color: if($color == secondary or $color == basic, mix-darkener($color), var(--#{$color}));
      @if not ($color == basic or $color == secondary or $color == gray) {
        color: var(--#{$color});
      }
      @each $state in get("state.current") {
        &:#{$state} {
          border-color: if($color==light, var(--light), var(--#{$color}-#{$state}));
          background-color: rgba(var(--#{$color}-#{$state}-rgb), var(--ghost-#{$state}));
          @if get("bootstrap.status") {
            color: if($color == secondary or $color == basic, sat($color), var(--#{$color}));
          }
        }
      }
    }
  }
}

/**
  Template (ghost): ghost styles
 */
%ghost {
  border: size(1px) solid transparent;
  @each $color, $value in get("color.state") {
    &.#{$color} {
      background-color: transparent;
      border: size(1px) solid transparent;
      // color: if($color == secondary or $color == basic, mix-darkener($color), var(--#{$color}));
      @if not ($color == secondary or $color == basic or $color == gray) {
        color: var(--#{$color});
      }
      @each $state in get("state.current") {
        &:#{$state} {
          background-color: rgba(var(--#{$color}-#{$state}-rgb), var(--ghost-#{$state}));
        }
      }
    }
  }
}

%placeholder {
  @each $color, $value in get("color.list") {
    @each $type in get("type") {
      &.#{$color} {
        @if ($type==fill) {
          @include install-placeholder($color: if($color == secondary or $color==basic or $color==light, var(--#{$color}-900), var(--white)), $opacity: get("element.input.placeholder.opacity"));
        } @else {
          &.#{$type} {
            @include install-placeholder($color: if($color == light, var(--light), var(--#{$color}-900)), $opacity: get("element.input.placeholder.opacity"));
          }
        }
      }
    }
  }
}

%button-customize {
  @if get("customize.status") {
    @each $type in get("type") {
      @each $color in get("color.state") {
        $selector: if($type==fill, "&.#{$color}", "&.#{$type}.#{$color}");
        #{$selector} { // if type fill render just `color` class else render `outline.color` and `ghost.color` classes
          @if ($color == secondary or $color==basic or $color==gray or $color==light) {
            color: var(get("customize.element.button.font.color"));
          }
          @if $type == outline {
            border: size(1px) solid if($color==light, rgba(var(--light-rgb), 0.5), var(#{get("customize.element.button.border.default")}));
            &:active, &:focus, &:hover {
              border: size(1px) solid if($color==light, var(--light), var(#{get("customize.element.button.border.default")}));
            }
          }
          @if ($type==outline or $type==ghost) {
            @each $state in get('state.current') {
              &:#{$state} {
                background-color: rgba(var(--gray-900-rgb), var(--ghost-#{$state}));
              }
            }
          }
        }
      }
    }
  }
}

/**
Template semantic color borders
*/
%semantic-border {
  @each $type in get("type") {
    @each $color, $value in get("color.semantic") {
      $selector: if($type==fill, "&.#{$color}", "&.#{$type}.#{$color}");
      #{$selector} {
        @if $type==fill or ($type==outline and get("customize.status")==false) {
          border: size(1px) solid var(--#{$color});
        }
        @if $type==outline or $type==ghost {
          color: var(--#{$color});
        }
        @each $state in get("state.current") {
          &:#{$state} {
            @if $type==fill or ($type==outline and get("customize.status")==false) {
              border: size(1px) solid var(--#{$color}-#{$state});
            } @else {
              border-color: transparent;
            }
          }
        }
      }
    }
  }
}

%semantic-background {
  @each $type in get("type") {
    @each $color, $value in get("color.semantic") {
      $selector: if($type==fill, "&.#{$color}", "&.#{$type}.#{$color}");
      #{$selector} {
        @if $type==fill {
          background-color: var(--#{$color});
          color: var(--white);
        } @else {
          background-color: transparent;
        }
        @each $state in get("state.current") {
          &:#{$state} {
            @if $type==fill {
              background-color: var(--#{$color}-#{$state});
            } @else if ($type == outline or $type == ghost) and get("customize.status") == false {
              background-color: rgba(var(--#{$color}-#{$state}-rgb), var(--ghost-#{$state}));
            }
          }
        }
      }
    }
  }
}

%semantic-input {
  @each $type in get("type") {
    @each $color, $value in get("color.semantic") {
      $selector: if($type==fill, "&.#{$color}", "&.#{$type}.#{$color}");
      #{$selector} {
        // @if $type==fill or $type==outline {
        border: size(1px) solid var(--#{$color}) !important;
        // }

        @each $state in get("state.current") {
          &:#{$state} {
            border-color: var(--#{$color}-#{$state}-rgb);
          }
        }
      }
    }
  }
}

#{get("selector")} {
  .fill {
    @extend %fill;
  }

  .ghost {
    @extend %ghost;
  }

  .outline {
    @extend %outline;
  }
}
